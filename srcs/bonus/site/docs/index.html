<!DOCTYPE html>
<html lang="pt-br">

<head>
<<<<<<< HEAD
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>dev.finacnde$</title>
  <style>
    /* Globais */
    :root {
      --dark-blue: #363f5f;
      --dark-green: #2D4A22;
      --light-green: #49AA26;
      --green: #3dd705;
      --red: #e92929;

    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      font-size: 93.75%;
    }

    body {
      background: #f0f2f5;
      font-family: 'Poppins', sans-serif;
    }

    .container {
      width: min(90vw, 800px);
      margin: auto;
    }

    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border-width: 0;
    }

    /* Tittles */

    h2 {
      margin-top: 3.2rem;
      margin-bottom: 0.8rem;
      color: var(--dark-blue);
      font-weight: normal;
    }

    /* links e buttons */
    a {
      color: var(--green);
      text-decoration: none;
    }

    a:hover {
      color: var(--light-green)
    }

    button {
      width: 100%;
      height: 50px;
      border: none;
      color: white;
      background: var(--light-green);
      padding: 0;
      border-radius: 0.25rem;
      cursor: pointer;

    }

    button :hover {
      background: var(--green);
    }

    .button.new {

      display: inline-block;
      margin: .8rem;
    }

    .button.cancel {
      color: var(--red);
      border: 2px solid var(--red);
      border-radius: 0.25rem;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0.6;

    }

    .button.cancel:hover {
      opacity: 1;
    }

    /* header */

    header {
      background: var(--dark-green);
      padding: 2rem 0 10rem;
      text-align: center;
    }

    #logo {
      color: #fff;
      font-weight: 100;
    }

    #balance {
      margin-top: -8rem;
    }

    #balance h2 {
      color: white;
      margin-top: 0rem;
    }

    /* Cards */
    .card {
      background: white;
      padding: 1.5rem 2rem;
      border-radius: 0.25rem;
      margin-bottom: 2rem;
      color: var(--dark-blue);
    }

    .card h3 {
      font-weight: normal;
      font-size: 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;

    }

    .card p {
      font-size: 2rem;
      line-height: 3rem;
      margin-top: 1rem;
    }

    .card.total {
      background: var(--light-green);
      color: white;
    }

    /* table */
    #transaction {
      display: block;
      width: 100%;
      overflow-x: auto;
    }

    #data-table {
      width: 100%;
      border-spacing: 0 0.5rem;
      color: #969cb3;
    }

    table thead tr th:first-child,
    table tbody tr td:first-child {
      border-radius: 0.5rem 0 0 0.5rem;
    }

    table thead tr th:last-child,
    table tbody tr td:last-child {
      border-radius: 0 0.5rem 0.5rem 0;
    }

    table tbody tr {
      opacity: 0.7;
    }

    table tbody tr:hover {
      opacity: 1;

    }

    table thead tr {
      color: var(--dark-blue);
    }

    table thead th {
      background: white;
      opacity: 0.6;

      font-weight: normal;
      padding: 1rem 2rem;
      text-align: left;
    }

    table tbody td {
      background: white;

      padding: 1rem 2rem;

    }

    td.description {
      color: var(--dark-blue);
    }

    td.income {
      color: #12a454
    }

    td.expensive {
      color: var(--red);
    }

    /* modal  */
    .modal-overlay {
      z-index: 999;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      position: fixed;
      top: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
    }

    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .modal {
      z-index: 1;
      background: #F0F2f5;
      padding: 2.4rem;
      position: relative;


    }

    /* Form */
    #form {
      max-width: 500px;

    }

    #form h2 {
      margin-top: 0;
    }

    input {
      border: none;
      border-radius: 0.2rem;
      padding: 0.8rem;
      width: 100%;
    }

    .input-group {
      margin-top: 0.8rem;

    }

    .input-group small {
      opacity: 0.4;
    }

    .input-group.actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .input-group.actions .button,
    .input-group.actions button {
      width: 48%;
    }

    /* footer */
    footer {

      text-align: center;
      padding: 4rem 0 2rem;
      color: var(--dark-blue);
      opacity: 0.6;

    }

    /* Responsividade */

    @media(min-width: 800px) {
      html {
        font-size: 87.5%;
      }

      #balance {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 2rem;
      }
    }
  </style>
</head>

<body>
  <header>
    <img src="./assets/logo.svg" alt="Logo Dev Finance">
  </header>
  <main class="container">
    <section id="balance">
      <h2 class="sr-only">Balanço</h2>
      <div class="card">
        <h3>
          <span> Entradas</span>
          <img src="./assets/income.svg" alt="Image de entradas" />
        </h3>
        <p id="incomeDisplay">R$ 0,00 </p>
      </div>
      <div class="card">
        <h3>
          <span> Saídas</span>
          <img src="./assets/expense.svg" alt="Image de entradas" />
        </h3>
        <p id="expensiveDisplay">R$ 0,00 </p>
      </div>
      <div class="card total">
        <h3>
          <span> Total</span>
          <img src="./assets/total.svg" alt="Image de entradas" />
        </h3>
        <p id="totalDisplay">R$ 0,00 </p>
      </div>
    </section>
    <section id="transaction">
      <h2 class="sr-only">Transações</h2>

      <a href="#" class="button new" onclick="Modal.open()">+ nova Transação</a>
      <table id="data-table">
        <thead>
          <tr>
            <th>Descrição</th>
            <th>Valor</th>
            <th>Data</th>
            <th></th>
          </tr>
        </thead>
        <tbody>

        </tbody>
      </table>
    </section>

  </main>

  <div class="modal-overlay">
    <div class="modal">

      <div class="form">
        <h2>Nova Transação</h2>
        <form action="" onsubmit="Form.submit(event)">
          <div class="input-group">
            <label class="sr-only" for="description"></label>
            <input type="text" id="description" name="description" placeholder="Description" />
          </div>
          <div class="input-group">
            <label class="sr-only" for="amount"></label>
            <input type="number" id="amount" step="0.01" name="amount" placeholder="0,00" />
          </div>
          <small>use o sinal - (negativo) para despesas e ,(virgula) para casas decimais </small>
          <div class="input-group">
            <label class="sr-only" for="date"></label>
            <input type="date" id="date" name="date" placeholder="01/01/2021" />
          </div>
          <div class="input-group actions" onclick="Modal.close()">
            <a href="#" class="button cancel">Cancelar</a>
            <button type="submit">Salvar</button>
          </div>
        </form>
      </div>

    </div>
  </div>

  <footer>
    <p>dev.finance$</p>
  </footer>

  <script>

    const Modal = {
      open() {
        // abrir modal
        document
          .querySelector('.modal-overlay')
          .classList.add("active")
      },
      close() {
        // fechar modal
        document
          .querySelector('.modal-overlay')
          .classList.remove("active")
      }
    }
    const Storage = {
      get() {
        return JSON.parse(localStorage.getItem("Dev.Fiances:transactions")) || []
      },
      set(transaction) {
        localStorage.setItem("Dev.Fiances:transactions", JSON.stringify(transaction))
      }
    }
    const Transaction = {
      all: Storage.get(),

      add(transaction) {
        Transaction.all.push(transaction)

        App.reload()
      },

      remove(index) {
        Transaction.all.splice(index, 1)

        App.reload()
      },

      incomes() {
        let income = 0;
        Transaction.all.forEach(transaction => {
          if (transaction.amount > 0) {
            income += transaction.amount;
          }
        })
        return income;
      },

      expenses() {
        let expense = 0;
        Transaction.all.forEach(transaction => {
          if (transaction.amount < 0) {
            expense += transaction.amount;
          }
        })
        return expense;
      },

      total() {
        return Transaction.incomes() + Transaction.expenses();
      }
    }
    const Utils = {
      formatCurrency(value) {
        const signal = Number(value) < 0 ? "-" : ""
        value = String(value).replace(/\D/g, "")

        value = Number(value) / 100

        value = value.toLocaleString("pt-br", {
          style: "currency",
          currency: "BRL"
        })
        return signal + value
      },
      formatAmount(value) {
        value = value * 100
        return Math.round(value)
      },
      formatDate(date) {
        const splitDate = date.split('-')
        return `${splitDate[2]}/${splitDate[1]}/${splitDate[0]}`
      }
    }

    const DOM = {
      transactionsContainer: document.querySelector('#data-table tbody'),
      addTransaction(transaction, index) {

        const tr = document.createElement('tr')
        tr.innerHTML = DOM.innerHTMLTransaction(transaction)
        tr.dataset.index = index
        DOM.transactionsContainer.appendChild(tr)
      },
      innerHTMLTransaction(transaction, index) {
        const CSSclass = transaction.amount > 0 ? 'income' : 'expensive'
        const amount = Utils.formatCurrency(transaction.amount)
        const html = `
=======
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>dev.finacnde$</title>
	<style>
		/* Globais */
		:root {
			--dark-blue: #363f5f;
			--dark-green: #2D4A22;
			--light-green: #49AA26;
			--green: #3dd705;
			--red: #e92929;

		}

		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		html {
			font-size: 93.75%;
		}

		body {
			background: #f0f2f5;
			font-family: 'Poppins', sans-serif;
		}

		.container {
			width: min(90vw, 800px);
			margin: auto;
		}

		.sr-only {
			position: absolute;
			width: 1px;
			height: 1px;
			padding: -1px;
			overflow: hidden;
			clip: rect(0, 0, 0, 0);
			white-space: nowrap;
			border-width: 0;
		}

		/* Tittles */

		h2 {
			margin-top: 3.2rem;
			margin-bottom: 0.8rem;
			color: var(--dark-blue);
			font-weight: normal;
		}

		/* links e buttons */
		a {
			color: var(--green);
			text-decoration: none;
		}

		a:hover {
			color: var(--light-green)
		}

		button {
			width: 100%;
			height: 50px;
			border: none;
			color: white;
			background: var(--light-green);
			padding: 0;
			border-radius: 0.25rem;
			cursor: pointer;

		}

		button :hover {
			background: var(--green);
		}

		.button.new {

			display: inline-block;
			margin: .8rem;
		}

		.button.cancel {
			color: var(--red);
			border: 2px solid var(--red);
			border-radius: 0.25rem;
			height: 50px;
			display: flex;
			align-items: center;
			justify-content: center;
			opacity: 0.6;

		}

		.button.cancel:hover {
			opacity: 1;
		}

		/* header */

		header {
			background: var(--dark-green);
			padding: 2rem 0 10rem;
			text-align: center;
		}

		#logo {
			color: #fff;
			font-weight: 100;
		}

		#balance {
			margin-top: -8rem;
		}

		#balance h2 {
			color: white;
			margin-top: 0rem;
		}

		/* Cards */
		.card {
			background: white;
			padding: 1.5rem 2rem;
			border-radius: 0.25rem;
			margin-bottom: 2rem;
			color: var(--dark-blue);
		}

		.card h3 {
			font-weight: normal;
			font-size: 1rem;
			display: flex;
			justify-content: space-between;
			align-items: center;

		}

		.card p {
			font-size: 2rem;
			line-height: 3rem;
			margin-top: 1rem;
		}

		.card.total {
			background: var(--light-green);
			color: white;
		}

		/* table */
		#transaction {
			display: block;
			width: 100%;
			overflow-x: auto;
		}

		#data-table {
			width: 100%;
			border-spacing: 0 0.5rem;
			color: #969cb3;
		}

		table thead tr th:first-child,
		table tbody tr td:first-child {
			border-radius: 0.5rem 0 0 0.5rem;
		}

		table thead tr th:last-child,
		table tbody tr td:last-child {
			border-radius: 0 0.5rem 0.5rem 0;
		}

		table tbody tr {
			opacity: 0.7;
		}

		table tbody tr:hover {
			opacity: 1;

		}

		table thead tr {
			color: var(--dark-blue);
		}

		table thead th {
			background: white;
			opacity: 0.6;

			font-weight: normal;
			padding: 1rem 2rem;
			text-align: left;
		}

		table tbody td {
			background: white;

			padding: 1rem 2rem;

		}

		td.description {
			color: var(--dark-blue);
		}

		td.income {
			color: #12a454
		}

		td.expensive {
			color: var(--red);
		}

		/* modal */
		.modal-overlay {
			z-index: 999;
			width: 100%;
			height: 100%;
			background-color: rgba(0, 0, 0, 0.7);
			position: fixed;
			top: 0;
			display: flex;
			align-items: center;
			justify-content: center;
			opacity: 0;
			visibility: hidden;
		}

		.modal-overlay.active {
			opacity: 1;
			visibility: visible;
		}

		.modal {
			z-index: 1;
			background: #F0F2f5;
			padding: 2.4rem;
			position: relative;


		}

		/* Form */
		#form {
			max-width: 500px;

		}

		#form h2 {
			margin-top: 0;
		}

		input {
			border: none;
			border-radius: 0.2rem;
			padding: 0.8rem;
			width: 100%;
		}

		.input-group {
			margin-top: 0.8rem;

		}

		.input-group small {
			opacity: 0.4;
		}

		.input-group.actions {
			display: flex;
			justify-content: space-between;
			align-items: center;
		}

		.input-group.actions .button,
		.input-group.actions button {
			width: 48%;
		}

		/* footer */
		footer {

			text-align: center;
			padding: 4rem 0 2rem;
			color: var(--dark-blue);
			opacity: 0.6;

		}

		/* Responsividade */

		@media(min-width: 800px) {
			html {
				font-size: 87.5%;
			}

			#balance {
				display: grid;
				grid-template-columns: repeat(3, 1fr);
				gap: 2rem;
			}
		}
	</style>
</head>

<body>
	<header>
		<img src="./assets/logo.svg" alt="Logo Dev Finance">
	</header>
	<main class="container">
		<section id="balance">
			<h2 class="sr-only">Balanço</h2>
			<div class="card">
				<h3>
					<span> Entradas</span>
					<img src="./assets/income.svg" alt="Image de entradas" />
				</h3>
				<p id="incomeDisplay">R$ 0,00 </p>
			</div>
			<div class="card">
				<h3>
					<span> Saídas</span>
					<img src="./assets/expense.svg" alt="Image de entradas" />
				</h3>
				<p id="expensiveDisplay">R$ 0,00 </p>
			</div>
			<div class="card total">
				<h3>
					<span> Total</span>
					<img src="./assets/total.svg" alt="Image de entradas" />
				</h3>
				<p id="totalDisplay">R$ 0,00 </p>
			</div>
		</section>
		<section id="transaction">
			<h2 class="sr-only">Transações</h2>

			<a href="#" class="button new" onclick="Modal.open()">+ nova Transação</a>
			<table id="data-table">
				<thead>
					<tr>
						<th>Descrição</th>
						<th>Valor</th>
						<th>Data</th>
						<th></th>
					</tr>
				</thead>
				<tbody>

				</tbody>
			</table>
		</section>

	</main>

	<div class="modal-overlay">
		<div class="modal">

			<div class="form">
				<h2>Nova Transação</h2>
				<form action="" onsubmit="Form.submit(event)">
					<div class="input-group">
						<label class="sr-only" for="description"></label>
						<input type="text" id="description" name="description" placeholder="Description" />
					</div>
					<div class="input-group">
						<label class="sr-only" for="amount"></label>
						<input type="number" id="amount" step="0.01" name="amount" placeholder="0,00" />
					</div>
					<small>use o sinal - (negativo) para despesas e ,(virgula) para casas decimais </small>
					<div class="input-group">
						<label class="sr-only" for="date"></label>
						<input type="date" id="date" name="date" placeholder="01/01/2021" />
					</div>
					<div class="input-group actions" onclick="Modal.close()">
						<a href="#" class="button cancel">Cancelar</a>
						<button type="submit">Salvar</button>
					</div>
				</form>
			</div>

		</div>
	</div>

	<footer>
		<p>dev.finance$</p>
	</footer>

	<script>

		const Modal = {
			open() {
				// abrir modal
				document
					.querySelector('.modal-overlay')
					.classList.add("active")
			},
			close() {
				// fechar modal
				document
					.querySelector('.modal-overlay')
					.classList.remove("active")
			}
		}

		const Storage = {
			get() {
				return JSON.parse(localStorage.getItem("Dev.Fiances:transactions")) || []
			},
			set(transaction) {
				localStorage.setItem("Dev.Fiances:transactions", JSON.stringify(transaction))
			}
		}
		const Transaction = {
			all: Storage.get(),

			add(transaction) {
				Transaction.all.push(transaction)

				App.reload()
			},

			remove(index) {
				Transaction.all.splice(index, 1)

				App.reload()
			},

			incomes() {
				let income = 0;
				Transaction.all.forEach(transaction => {
					if (transaction.amount > 0) {
						income += transaction.amount;
					}
				})
				return income;
			},

			expenses() {
				let expense = 0;
				Transaction.all.forEach(transaction => {
					if (transaction.amount < 0) {
						expense += transaction.amount;
					}
				})
				return expense;
			},

			total() {
				return Transaction.incomes() + Transaction.expenses();
			}
		}
		const Utils = {
			formatCurrency(value) {
				const signal = Number(value) < 0 ? "-" : ""
				value = String(value).replace(/\D/g, "")

				value = Number(value) / 100

				value = value.toLocaleString("pt-br", {
					style: "currency",
					currency: "BRL"
				})
				return signal + value
			},
			formatAmount(value) {
				value = value * 100
				return Math.round(value)
			},
			formatDate(date) {
				const splitDate = date.split('-')
				return `${splitDate[2]}/${splitDate[1]}/${splitDate[0]}`
			}
		}

		const DOM = {
			transactionsContainer: document.querySelector('#data-table tbody'),
			addTransaction(transaction, index) {

				const tr = document.createElement('tr')
				tr.innerHTML = DOM.innerHTMLTransaction(transaction)
				tr.dataset.index = index
				DOM.transactionsContainer.appendChild(tr)
			},
			innerHTMLTransaction(transaction, index) {
				const CSSclass = transaction.amount > 0 ? 'income' : 'expensive'
				const amount = Utils.formatCurrency(transaction.amount)
				const html = `
>>>>>>> main
      <td class="description">${transaction.description}</td>
      <td class="${CSSclass}">${amount}</td>
      <td class="date">${transaction.date}</td>
      <td>
        <img onClick="Transaction.remove(${index})" src="./assets/minus.svg" alt="Remover transação">
      </td>
   
    `
<<<<<<< HEAD
        return html
      },
      updateBalance() {
        document.getElementById('incomeDisplay').innerHTML = Utils.formatCurrency(Transaction.incomes())
        document.getElementById('expensiveDisplay').innerHTML = Utils.formatCurrency(Transaction.expenses())
        document.getElementById('totalDisplay').innerHTML = Utils.formatCurrency(Transaction.total())
      },
      clearTransactions() {
        DOM.transactionsContainer.innerHTML = ''
      }
    }

    const Form = {
      description: document.querySelector('input#description'),
      amount: document.querySelector('input#amount'),
      date: document.querySelector('input#date'),

      getValue() {
        return {
          description: Form.description.value,
          amount: Form.amount.value,
          date: Form.date.value,
        }
      },
      validateField() {
        const { amount, description, date } = Form.getValue()
        if (description.trim() === '' ||
          amount.trim() === '' ||
          date.trim() === '') {
          throw new Error("por favor, preencha todos os campos!")
        }

      },

      formatData() {
        let { amount, description, date } = Form.getValue()
        amount = Utils.formatAmount(amount)
        date = Utils.formatDate(date)
        return {
          description,
          amount,
          date
        }
      },
      clearFields() {
        Form.description.value = ""
        Form.amount.value = ""
        Form.date.value = ""
      },
      submit(event) {
        event.preventDefault()
        try {
          Form.validateField()
          const transaction = Form.formatData()
          Transaction.add(transaction)
          Form.clearFields()
          Modal.close()

        }
        catch (err) {
          alert(err.message)
        }

      }
    }


    const App = {
      init() {
        Transaction.all.forEach(DOM.addTransaction);
        DOM.updateBalance()
        Storage.set(Transaction.all)
      },
      reload() {
        DOM.clearTransactions()
        App.init()
      }
    }

    App.init()


  </script>
=======
				return html
			},
			updateBalance() {
				document.getElementById('incomeDisplay').innerHTML = Utils.formatCurrency(Transaction.incomes())
				document.getElementById('expensiveDisplay').innerHTML = Utils.formatCurrency(Transaction.expenses())
				document.getElementById('totalDisplay').innerHTML = Utils.formatCurrency(Transaction.total())
			},
			clearTransactions() {
				DOM.transactionsContainer.innerHTML = ''
			}
		}

		const Form = {
			description: document.querySelector('input#description'),
			amount: document.querySelector('input#amount'),
			date: document.querySelector('input#date'),

			getValue() {
				return {
					description: Form.description.value,
					amount: Form.amount.value,
					date: Form.date.value,
				}
			},
			validateField() {
				const { amount, description, date } = Form.getValue()
				if (description.trim() === '' ||
					amount.trim() === '' ||
					date.trim() === '') {
					throw new Error("por favor, preencha todos os campos!")
				}

			},

			formatData() {
				let { amount, description, date } = Form.getValue()
				amount = Utils.formatAmount(amount)
				date = Utils.formatDate(date)
				return {
					description,
					amount,
					date
				}
			},
			clearFields() {
				Form.description.value = ""
				Form.amount.value = ""
				Form.date.value = ""
			},
			submit(event) {
				event.preventDefault()
				try {
					Form.validateField()
					const transaction = Form.formatData()
					Transaction.add(transaction)
					Form.clearFields()
					Modal.close()

				}
				catch (err) {
					alert(err.message)
				}

			}
		}


		const App = {
			init() {
				Transaction.all.forEach(DOM.addTransaction);
				DOM.updateBalance()
				Storage.set(Transaction.all)
			},
			reload() {
				DOM.clearTransactions()
				App.init()
			}
		}

		App.init()
	</script>
>>>>>>> main
</body>

</html>